$(document).ready(function(){function t(n,t){var i=$("#"+t);n?i.removeAttr("disabled").focus():i.attr("disabled","disabled").val("")}function u(){var n=$("#tbxDataInicio").val(),t=$("#tbxDataFim").val(),i=$("#tbxDescricao").val();$.ajax({url:"/Ideias/GetIdeiasList?dataInicio="+n+"&dataFim="+t+"&descricao="+i,type:"GET",success:function(n){$("#lista-ideias-content").html(n)}})}var n,i,r;$("#tbxDataInicio, #tbxDataFim, #DataSubAnalise").datepicker({format:"dd/mm/yyyy",todayHighlight:!0,autoclose:!0});$("#lnkIdeias").addClass("active");$("#AnexoIFormFile").attr("data-val","true");$("#AnexoIFormFile").attr("data-val-required","Preencha o campo Anexo");$("#ProdutoNovo").prop("checked")&&t(!0,"ProdutoExistente");$("#ExisteConcorrente").prop("checked")&&t(!0,"DetalhesConcorrente");$("#ProdutoNovo").change(function(){t(this.checked,"ProdutoExistente")});$("#ExisteConcorrente").change(function(){t(this.checked,"DetalhesConcorrente")});$("#modal-adicionar-anexo").on("hidden.bs.modal",function(){$("#adicionarAnexoForm").find("#Descricao, #AnexoIFormFile, #img_nome").val("");$("#adicionarAnexoForm").find("#img_nome").text("")});$("#modal-excluir-anexo").on("show.bs.modal",function(t){i=$(t.relatedTarget).attr("data-id");n=$(t.relatedTarget).attr("data-ideiaid");r=$(t.relatedTarget).attr("data-filename")});$("#modal-excluir-ideia").on("show.bs.modal",function(t){n=$(t.relatedTarget).attr("data-id")});$("#btnAdicionarAnexo").on("click",function(n){n.preventDefault();var t=document.forms[2];if(t.elements.Descricao.value===""){t.elements.Descricao.focus();return}if(t.elements.AnexoIFormFile.value===""){t.elements.AnexoIFormFile.focus();return}$.ajax({url:"/Ideias/AdicionarAnexo",data:new FormData(t),contentType:!1,processData:!1,type:"POST",success:function(n){n.success?($("#modal-adicionar-anexo").modal("hide"),$("#lista-anexo-content").load(n.url)):($("#modal-adicionar-anexo").html(n),$("#modal-adicionar-anexo").find(".modal").modal("show"))},fail:function(){alert("Falha ao adicionar o anexo.")}})});$("#btnExcluirAnexo").click(function(t){t.preventDefault();$.ajax({url:"/Ideias/ExcluirAnexo?id="+i+"&ideiaId="+n+"&filename="+r,type:"GET",success:function(n){n.success?($("#modal-excluir-anexo").modal("hide"),$("#lista-anexo-content").load(n.url)):alert("Falha ao excluir o anexo.")}})});$("#btnExcluirIdeia").click(function(){$.ajax({url:"/Ideias/Delete?id="+n,type:"GET",success:function(){document.location.reload()}})});$("#AnexoIFormFile").change(function(){$("#img_nome").text(this.files[0].name);$("#img_nome")[0].style.display="block"});$("#tbxDataInicio, #tbxDataFim, #tbxDescricao").change(function(){u()});$("#tbxDescricao").keyup(function(){u()})});