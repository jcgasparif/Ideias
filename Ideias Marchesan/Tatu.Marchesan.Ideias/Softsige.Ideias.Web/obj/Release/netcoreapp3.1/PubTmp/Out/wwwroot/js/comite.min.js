$(document).ready(function(){function t(){var n=$("#tbxDataInicio").val(),t=$("#tbxDataFim").val(),i=$("#tbxDescricao").val();$.ajax({url:"/Comite/GetComiteIdeiasList?dataInicio="+n+"&dataFim="+t+"&descricao="+i,type:"GET",success:function(n){$("#lista-comite-ideias-content").html(n)}})}var n;$("#tbxDataInicio, #tbxDataFim, #tbxDataReuniao ").datepicker({format:"dd/mm/yyyy",todayHighlight:!0,autoclose:!0});$("#lnkComite").addClass("active");$("#AnexoIFormFile").attr("data-val","true");$("#AnexoIFormFile").attr("data-val-required","Preencha o campo Anexo");$("#ibox-title-comite-detalhes-ideia").click(function(){$("#ibox-content-comite-detalhes-ideia").toggle();$("#ibox-tools-comite-detalhes-ideia-chevron").toggleClass("fa-chevron-up fa-chevron-down")});$("#tbxDataInicio, #tbxDataFim, #tbxDescricao").change(function(){t()});$("#tbxDescricao").keyup(function(){t()});$("#modal-criar-reuniao").on("show.bs.modal",function(t){t.relatedTarget&&(n=$(t.relatedTarget).attr("data-ideiaid"))});$("#modal-ata-reuniao").on("show.bs.modal",function(t){t.relatedTarget&&(n=$(t.relatedTarget).attr("data-ideiaid"));$("#adicionarAnexoForm").find("#Descricao, #AnexoIFormFile, #img_nome").val("");$("#adicionarAnexoForm").find("#img_nome").text("")});$("#AnexoIFormFile").change(function(){$("#img_nome").text(this.files[0].name);$("#img_nome")[0].style.display="block"});$("#btnAdicionarReuniao").click(function(t){t.preventDefault();var r=$("#tbxDataReuniao").val(),i=$("#tbxHoraReuniao").val();console.log(i);$.ajax({url:"/Comite/CriarReuniao?ideiaId="+n+"&data="+r+" "+i,type:"GET",success:function(n){n.success?($("#modal-criar-reuniao").modal("hide"),document.location.reload()):alert("Falha ao criar reuni√£o.")}})});$("#btnAdicionarAtaReuniao").on("click",function(t){t.preventDefault();var i=document.forms[1];if(i.elements.Descricao.value===""){i.elements.Descricao.focus();return}if(i.elements.AnexoIFormFile.value===""){i.elements.AnexoIFormFile.focus();return}i.elements.IdeiaId.value=n;$.ajax({url:"/Comite/AdicionarAnexo",data:new FormData(i),contentType:!1,processData:!1,type:"POST",success:function(n){n.success?($("#modal-ata-reuniao").modal("hide"),document.location.reload()):(document.location.reload(),$("#modal-ata-reuniao").find(".modal").modal("show"))},fail:function(){alert("Falha ao adicionar o anexo.")}})})});